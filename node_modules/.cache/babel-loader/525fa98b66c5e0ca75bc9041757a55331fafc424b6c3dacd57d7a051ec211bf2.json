{"ast":null,"code":"import React from \"react\";\nconst CartReducer = (state, action) => {\n  switch (action.type) {\n    case \"SHOW_CART\":\n      return {\n        ...state,\n        cartIsShown: true\n      };\n    case \"CLOSE_CART\":\n      return {\n        ...state,\n        cartIsShown: false\n      };\n    case \"INITIATE_DATA\":\n      return {\n        ...state,\n        meals: action.payload\n      };\n    case \"ADD_CART\":\n      const {\n        amount,\n        id\n      } = action.payload;\n      const sameItem = state.cart.find(meal => meal.id === id);\n      const newItem = state.meals.find(meal => meal.id === id);\n      if (sameItem) {\n        return {\n          ...state,\n          cart: state.cart.map(meal => {\n            if (meal.id === sameItem.id) {\n              return {\n                ...meal,\n                amount: Number(meal.amount) + Number(amount)\n              };\n            } else {\n              return {\n                ...meal\n              };\n            }\n          })\n        };\n      }\n      return {\n        ...state,\n        cart: [...state.cart, {\n          ...newItem,\n          amount\n        }]\n      };\n    case \"ADD_AMOUNT\":\n      const {\n        key\n      } = action.payload;\n      return {\n        ...state,\n        cart: state.cart.map(meal => {\n          if (meal.id === key) return {\n            ...meal,\n            amount: Number(meal.amount) + 1\n          };else return {\n            ...meal\n          };\n        })\n      };\n    case \"REDUCE_AMOUNT\":\n      const {\n        key2\n      } = action.payload;\n      const tempCart = state.cart.map(meal => {\n        if (meal.id === key2) return {\n          ...meal,\n          amount: Number(meal.amount) - 1\n        };else return {\n          ...meal\n        };\n      });\n      const tempCart2 = state.cart.filter(meal => meal.id !== key2);\n      const targetMeal = state.cart.find(meal => meal.id === key2);\n      return {\n        ...state,\n        cart: targetMeal.amount > 1 ? tempCart : tempCart2\n      };\n    case \"COUNT_TOTAL\":\n      const total_amount = state.cart.reduce((accumulator, currentValue) => {\n        return accumulator + currentValue.amount;\n      }, 0);\n      return total_amount;\n  }\n};\n_c = CartReducer;\nexport default CartReducer;\nvar _c;\n$RefreshReg$(_c, \"CartReducer\");","map":{"version":3,"names":["React","CartReducer","state","action","type","cartIsShown","meals","payload","amount","id","sameItem","cart","find","meal","newItem","map","Number","key","key2","tempCart","tempCart2","filter","targetMeal","total_amount","reduce","accumulator","currentValue","_c","$RefreshReg$"],"sources":["/Users/xiaoyuren/Downloads/01-starting-project/src/store/cart-reducer.js"],"sourcesContent":["import React from \"react\";\n\nconst CartReducer = (state, action) => {\n  switch (action.type) {\n    case \"SHOW_CART\":\n      return { ...state, cartIsShown: true };\n    case \"CLOSE_CART\":\n      return { ...state, cartIsShown: false };\n    case \"INITIATE_DATA\":\n      return { ...state, meals: action.payload };\n    case \"ADD_CART\":\n      const { amount, id } = action.payload;\n      const sameItem = state.cart.find((meal) => meal.id === id);\n      const newItem = state.meals.find((meal) => meal.id === id);\n      if (sameItem) {\n        return {\n          ...state,\n          cart: state.cart.map((meal) => {\n            if (meal.id === sameItem.id) {\n              return { ...meal, amount: Number(meal.amount) + Number(amount) };\n            } else {\n              return { ...meal };\n            }\n          }),\n        };\n      }\n      return { ...state, cart: [...state.cart, { ...newItem, amount }] };\n\n    case \"ADD_AMOUNT\":\n      const { key } = action.payload;\n      return {\n        ...state,\n        cart: state.cart.map((meal) => {\n          if (meal.id === key)\n            return { ...meal, amount: Number(meal.amount) + 1 };\n          else return { ...meal };\n        }),\n      };\n    case \"REDUCE_AMOUNT\":\n      const { key2 } = action.payload;\n      const tempCart = state.cart.map((meal) => {\n        if (meal.id === key2)\n          return { ...meal, amount: Number(meal.amount) - 1 };\n        else return { ...meal };\n      });\n      const tempCart2 = state.cart.filter((meal) => meal.id !== key2);\n      const targetMeal = state.cart.find((meal) => meal.id === key2);\n      return {\n        ...state,\n        cart: targetMeal.amount > 1 ? tempCart : tempCart2,\n      };\n    case \"COUNT_TOTAL\":\n      const total_amount = state.cart.reduce((accumulator, currentValue) => {\n        return accumulator + currentValue.amount;\n      }, 0);\n      return total_amount;\n  }\n};\n\nexport default CartReducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}